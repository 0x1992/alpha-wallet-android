<ts:action xmlns="http://www.w3.org/1999/xhtml" xmlns:ts="http://tokenscript.org/2019/05/tokenscript">
    <ts:name>
        <ts:string xml:lang="en">Transfer xDAI to DAI</ts:string>
        <ts:string xml:lang="zh">將xDAI轉爲DAI</ts:string>
    </ts:name>
    <!-- because this action has xdai as input, it should be listed as
         an action under XDAI's token view. -->
    <ts:input>
        <ts:token name="xdai">
            <ts:ethereum network="100"></ts:ethereum>
        </ts:token>
    </ts:input>
    <!-- because this action has DAI as output, when a user decides to
         create a new token, this action qallows DAI token to be chosen as
         the new token to create -->
    <ts:output>
        <ts:token name="dai">
            <ts:contract>
                <ts:address network="1">0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359</ts:address>
            </ts:contract>
        </ts:token>
    </ts:output>
    <ts:attribute-type id="amount" syntax="1.3.6.1.4.1.1466.115.121.1.36">
        <ts:name>
            <ts:string xml:lang="en">Amount</ts:string>
            <ts:string xml:lang="zh">代幣金額</ts:string>
        </ts:name>
        <ts:origins>
            <!-- e18 is a hard coded multiplier.
            rationale for hardcoding: avoiding over-design  -->
            <ts:user-entry as="e18"></ts:user-entry>
        </ts:origins>
    </ts:attribute-type>
    <!-- if the user tries to use this action when having little xdai
         balance, either by clicking this action under the XDAI's
         token view, or by clicking "create" token and choosing DAI,
         the following message shows. -->
    <!-- The exclusion rule here is excluded out to reduce the scope of schema-2019-05
    <ts:exclude>
        <ts:selection>
            <ts:token filter="balance<=1000000000"/>
        </ts:selection>
        <ts:message>
            <ts:string xml:lang="en">Not enough balance.</ts:string>
        </ts:message>
    </exclude>
    -->
    <ts:transaction>
        <ts:ethereum>
            <ts:to>0x7301CFA0e1756B71869E93d4e4Dca5c7d0eb0AA6</ts:to>
            <ts:value ref="amount"></ts:value>
        </ts:ethereum>
    </ts:transaction>
    <style type="text/css">
        body {
    font-family: Arial;
}
table {
    margin: 25px;
    width: 90%;
    table-layout: auto;
}
.fixed {
    table-layout: fixed;
}
table,
td,
th {
    border-collapse: collapse;
}
th,
td {
    border: solid 0px;
    text-align: left;
}
form {
    display: flex;
    align-items: center;
}
input {
    background-color: #FFFFFF;
    border: #D8D8D8 solid 1px;
    border-radius: 6px;
    padding: 0.5em;
    width: 70%;
    height: 50px;
    margin-top: 5px;
    font-size: 1em;
}

    </style>
    <ts:view>
        <script type="text/javascript">
class Token {
    constructor(tokenInstance) {
        this.props = tokenInstance
    }
    render() {
        return `
			&lt;div&gt;
				&lt;table&gt;
					&lt;thead&gt;
						&lt;tr&gt;
							&lt;th&gt;xDAI Converter&lt;/th&gt;
						&lt;/tr&gt;
					&lt;/thead&gt;
					&lt;tbody&gt;
						&lt;tr&gt;
							&lt;td id="xdaiBalance"&gt;&lt;img
									src="data:image/png;base64,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"
									height="20" alt="Dai Balance" /&gt;
								&lt;div id="xDaiVal"&gt;&lt;/div&gt;
							&lt;/td&gt;
						&lt;/tr&gt;
					&lt;/tbody&gt;
				&lt;/table&gt;
				&lt;h2&gt;Convert to DAI&lt;/h2&gt;
				&lt;form action="/"&gt;
					&lt;p&gt;&lt;input type="number" id="amount" /&gt;&lt;img
							src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAoCAYAAACfKfiZAAAABGdBTUEAALGPC/xhBQAAAcNJREFUWAntl71KxEAQx03OyuJSiIKtCIIfT+ATiOnEsxMld6X2Fgo2PoBgdXfJNT5BtNM7BLGysvQZvM5CuFzifwJzjHf5uLBbbiDszO7M/H87bGBjLZQ8vu9vxXEcWpb14HnedUl4utzpdB6TJDmQsch/ajabrpwj256ekH6v19sej8cDFFsHxBUK38r1AnszYy1rLh+AxEejUR+FVrkYQC4rQHBa4ZjZAYjsRFE0kOJcRTfEDACJQ6wPoRUWnR51QvwDCIJgt0ycYXRBTABIHAfupWjnLM6jDogUIAzDpariEqLb7XrsVx0XKcF13V987/fY0bIo4MA+EX5q4nv+RNwrz9u2ncD+YL/qmAKgaIzEG5mMw7gBoRkAEm+1WhcyVsWenAGVIiq5BsB0wHTAdMB0wHTAdMB0wHTAdCC9FatcKtvt9jHy92QN3JxnfutoDrF3Mg638XdlABQ5QvFDWTjHpv+Mc7mGvDXlM1Cv108B8SYLz2NTjuM4Z8oAjUbjBxD7VSAolnIoVxmAdlsFQopTrhaAeSGmxbUClEFkiWsHyIPIEy8EqNVq30gcUhA/8BO8X+znjXwmsP5MLx+4rPg/qL3E8KLnDDoAAAAASUVORK5CYII="
							style="display: inline;vertical-align: -15px;" height="40" alt="xDai Bridge" /&gt;&lt;/p&gt;
				&lt;/form&gt;
            &lt;/div&gt;`;
    }
}

web3.tokens.dataChanged = (oldTokens, updatedTokens) =&gt; {
    const currentTokenInstance = web3.tokens.data.currentInstance;
    const domHtml = new Token(currentTokenInstance).render();
    document.getElementById('root').innerHTML = domHtml
    if (currentTokenInstance.balance != null) {
        document.getElementById('xDaiVal').innerHTML = currentTokenInstance.balance / 1e+18;
    }
};
</script>
<div id="root"></div>

    </ts:view>
</ts:action>